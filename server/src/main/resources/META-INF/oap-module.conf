{
name = oap-ws-security-server
dependsOn = [oap-ws]
services {
    organization-storage {
        implementation = oap.ws.security.server.OrganizationStorage
        parameters {
            path = /var/lib/oap-security/organizations
        }
        supervision.supervise = true
    }
    user-storage {
        implementation = oap.ws.security.server.UserStorage
        parameters {
            path = /var/lib/oap-security/users
        }
        supervision.supervise = true
    }
    auth-service {
        implementation = oap.ws.security.server.AuthService
        parameters {
            expirationTime = 60
            salt = "oap-security"
        }
        supervision.supervise = true
    }
    ws-token {
        implementation = oap.ws.security.server.TokenServiceImpl
        parameters {
            authService = "@service:auth-service"
        }
        dependsOn = [auth-service]
    }
    ws-organization {
       implementation = oap.ws.security.server.OrganizationWS
       parameters {
            organizationStorage = "@service:organization-storage"
            userStorage = "@service:user-storage"
            salt = "oap-security"
       }
       supervision.supervise = true
       dependsOn = [organization-storage]
    }
    ws-login {
       implementation = oap.ws.security.server.LoginWS
       parameters {
            userStorage = "@service:user-storage"
            authService = "@service:auth-service"
            cookieDomain = ""
            cookieExpiration = 60
       }
       supervision.supervise = true
       dependsOn = [organization-storage,auth-service]
    }
    ws-auth {
       implementation = oap.ws.security.server.AuthWS
       parameters {
         authService = "@service:auth-service"
       }
       supervision.supervise = true
       dependsOn = [auth-service]
    }
  }
}